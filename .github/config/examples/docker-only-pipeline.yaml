---
# Pipeline configuration for Docker-based deployment (any tech stack)
# Save this as .github/pipeline.yaml in your project

version: '2.0'

# Stack will be auto-detected
stack: auto

pipeline:
  fail_fast: false
  enable_caching: true

security:
  enable: true
  trufflehog: true
  dependency_review: true

lint:
  enable: true

test:
  enable: true
  coverage: false

build:
  enable: true

deployment:
  provider: docker

  docker:
    dockerfile: Dockerfile
    image_name: ${{ github.event.repository.name }}
    registry: ghcr # Options: dockerhub, ghcr, gcr, ecr, custom
    # registry_url: registry.example.com  # For custom registry
    platforms: linux/amd64,linux/arm64
    push: true

  environments:
    - name: preview
      trigger:
        event: pull_request
      auto_deploy: true

    - name: production
      trigger:
        event: push
        branch: main
      auto_deploy: true

release:
  enable: true
  type: simple
